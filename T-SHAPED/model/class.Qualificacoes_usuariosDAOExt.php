<?phprequire("../model/class.qualificacoes_usuariosDAO.php");require_once ('../model/class.qualificacoesDAOExt.php');require_once ('../model/class.de_paraDAOExt.php');/** * Classe que representa uma extensão da classe DAO e inclui métodos * específicos para a tabela qualificacoes_usuarios, base T-shaped. */class qualificacoes_usuariosDAOExt extends qualificacoes_usuariosDAO {    public function getDePara() {        list($countReg, $DadosDePara) = de_paraDAOExt::select(" de = ".$this->nota);        if ($countReg > 0)             return $DadosDePara[0];        else            return null;    }            public function getDePara2() {        list($countReg, $DadosDePara) = de_paraDAOExt::select(" de = ".$this->posx);        if ($countReg > 0)             return $DadosDePara[0];        else            return null;    }         public function getQualificacao() {        list($countReg, $Dados) = qualificacoesDAOExt::select(" id = ".$this->qualificacoes_id);        if ($countReg > 0)             return $Dados[0];        else            return null;    }            function validaQualifUsuario($idUsuario, $idQualificacao){        //die("==>".$idQualificacao.$idUsuario);        list($countReg) = qualificacoes_usuariosDAOExt::select(" usuarios_id = '".$idUsuario."' and qualificacoes_id = '".$idQualificacao."'");                  if($countReg > 0){            return true; //existe        }        else{            return false;        }    }        //método que faz a atualização de Qualificacoes_usuarios no BD    public static function updatePosXY($obj) {        //pegar os dados do objeto        $id                             = $obj->getId();        $pos_x                          = $obj->getPos_x();        $pos_y                          = $obj->getPos_y();        //montar o comando SQL        $sql = "update Qualificacoes_usuarios           set                posx   = '$pos_x'               ,posy   = '$pos_y'          where id = $id";//die($sql);        // abre a conexão com o BD        $dba = new DbAdmin();        $dba->connectDefault();        //executar o comando SQL        $res = $dba->query($sql);        $retorno = Array();        if (!$res) {                $retorno[0] = mysql_errno();                $retorno[1] = mysql_error();                $retorno[2]  = "";        }        else {            $sql = "select * from Qualificacoes_usuarios where id = $id";            $res = $dba->query($sql);            if (!$res) {                    $retorno[0] = mysql_errno();                    $retorno[1] = mysql_error();                    $retorno[2] = "";            }            else {                $id                             = $dba->result($res, 0, "id");                $qualificacoes_id               = $dba->result($res, 0, "qualificacoes_id");                $usuarios_id                    = $dba->result($res, 0, "usuarios_id");                $descricao                      = $dba->result($res, 0, "descricao");                $tipo                           = $dba->result($res, 0, "tipo");                $nota                           = $dba->result($res, 0, "nota");                $cor_fundo_qualif               = $dba->result($res, 0, "cor_fundo_qualif");                $font_qualif                    = $dba->result($res, 0, "font_qualif");                $dt_cadastro                    = $dba->result($res, 0, "dt_cadastro");                $dt_alteracao                   = $dba->result($res, 0, "dt_alteracao");                $cor_font_qualif                = $dba->result($res, 0, "cor_font_qualif");                $url_imagem                     = $dba->result($res, 0, "url_imagem");                $pos_x                          = $dba->result($res, 0, "posx");                $pos_y                          = $dba->result($res, 0, "posy");                $retObj = new Qualificacoes_usuariosDAOExt();                $retObj->setId($id);                $retObj->setQualificacoes_id($qualificacoes_id);                $retObj->setUsuarios_id($usuarios_id);                $retObj->setDescricao($descricao);                $retObj->setTipo($tipo);                $retObj->setNota($nota);                $retObj->setCor_fundo_qualif($cor_fundo_qualif);                $retObj->setFont_qualif($font_qualif);                $retObj->setDt_cadastro($dt_cadastro);                $retObj->setDt_alteracao($dt_alteracao);                $retObj->setCor_font_qualif($cor_font_qualif);                $retObj->setUrl_imagem($url_imagem);                $retObj->setPos_x($pos_x);                $retObj->setPos_y($pos_y);                $retorno[0] = 0;                $retorno[1] = "";                $retorno[2] = $retObj;            } // if (!$res)...        } // if (!$res)...	return $retorno;    }}?>