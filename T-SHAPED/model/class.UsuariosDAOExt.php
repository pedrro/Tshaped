<?phprequire("../model/class.UsuariosDAO.php");include_once ('../model/class.qualificacoes_usuariosDAOExt.php');/** * Classe que representa uma extensão da classe DAO e inclui métodos * específicos para a tabela usuarios, base T-shaped. */class usuariosDAOExt extends usuariosDAO {	    public function getQualificacoes(){        list($countReg, $DadosQualificacoes) = qualificacoes_usuariosDAOExt::select(" usuarios_id = ".$this->id);        return($DadosQualificacoes);    }/*select usu.id as usuId, usu.nome as usuNome, quali.nome as qualifNome, qualus.nota as qualifNota from usuarios usu				join qualificacoes_usuarios qualus on usu.id = qualus.usuarios_id				join qualificacoes quali on quali.id = qualus.qualificacoes_id				where				quali.nome = 'Linguagem C'*/	public static function getUsuariosComQualif($nomeQualif, $nivelQualif) {        $dba = new DbAdmin();        $dba->connectDefault();        $sql = "select usu.id as usuId, usu.nome as usuNome, quali.nome as qualifNome, qualus.nota as qualifNota, qualus.tipo as qualifTipo         		from usuarios usu				join qualificacoes_usuarios qualus on usu.id = qualus.usuarios_id				join qualificacoes quali on quali.id = qualus.qualificacoes_id				where				quali.nome like '$nomeQualif%'";		if( !empty($nivelQualif) )			$sql .= " and qualus.nota >= $nivelQualif";		$sql .= " order by quali.nome";        $res = $dba->query($sql);        $num = $dba->rows($res);        $vet = array();		$vetRetorno = array();        if( $num <= 0)        	return null;        for ($i=0; $i < $num; $i++) {            $idUsr                          = $dba->result($res, $i, "usuId");            $nomeUsr                        = $dba->result($res, $i, "usuNome");            $nomeQualif                     = $dba->result($res, $i, "qualifNome");            $notaQualif                     = $dba->result($res, $i, "qualifNota");            $tipoQualif                     = $dba->result($res, $i, "qualifTipo");			$vet[0] = $idUsr;			$vet[1] = $nomeUsr;			$vet[2] = $nomeQualif;			$vet[3] = $notaQualif;			if($tipoQualif == 'E')				$vet[4] = 'Especialização';			else				$vet[4] = 'Interesse';			$vetRetorno[$i] = $vet;		}        return $vetRetorno;    }}?>